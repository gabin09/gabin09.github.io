<!DOCTYPE html>
<html>
<head>
    <title>숫자야구 게임</title>
</head>
<body>
    <h1>숫자야구 게임</h1>
    <h2>게임 규칙:</h2>
    <ul>
        <li>각 플레이어는 중복되지 않는 4자리 비밀번호를 생성합니다.</li>
        <li>상대방의 비밀번호를 추측하고, 힌트를 받아 정확한 비밀번호를 맞추는 것이 목표입니다.</li>
        <li>스트라이크: 숫자와 위치가 모두 맞은 경우</li>
        <li>볼: 숫자는 맞지만 위치가 틀린 경우</li>
        <li>낫싱: 추측한 숫자가 비밀번호에 전혀 포함되지 않는 경우</li>
    </ul>
    
    <h2>게임 시작:</h2>
    <form>
        <label for="guess">비밀번호 추측:</label>
        <input type="text" id="guess" name="guess" maxlength="4" pattern="[1-9]{4}" required>
        <input type="submit" value="추측">
    </form>

    <h2>힌트:</h2>
    <p id="hint"></p>

    <h2>남은 기회:</h2>
    <p id="chances">10</p>

    <button id="restartButton" style="display: none;">다시 시작</button>

    <script>
        // 사용자가 하는 일: 비밀번호 생성
        var secretPassword = generateRandomPassword();
        var hintCount = 1;

        // AI가 하는 일: 추측 버튼 클릭 시 힌트를 확인하고 기회를 체크하는 함수
        document.querySelector('form').addEventListener('submit', function(event) {
            event.preventDefault();
            decreaseChances();
            checkGameOver();
            
            var guess = document.getElementById('guess').value;
            var hint = getHint(guess, secretPassword);
            document.getElementById('hint').innerHTML += hintCount + '. ' + hint + '<br>';
            hintCount++;
        });

        // AI가 하는 일: 다시 시작 버튼 클릭 시 게임을 재시작하는 함수
        document.getElementById('restartButton').addEventListener('click', function() {
            secretPassword = generateRandomPassword();
            hintCount = 1;
            remainingChances = 10;
            document.getElementById('chances').textContent = remainingChances;
            document.getElementById('hint').textContent = '';
            document.getElementById('guess').value = '';
            document.getElementById('restartButton').style.display = 'none';
            document.querySelector('form input[type="submit"]').disabled = false;
        });

        // AI가 하는 일: 4자리 랜덤 비밀번호 생성
        function generateRandomPassword() {
            var numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9];
            var password = [];
            
            for (var i = 0; i < 4; i++) {
                var randomIndex = Math.floor(Math.random() * numbers.length);
                var digit = numbers[randomIndex];
                numbers.splice(randomIndex, 1);
                password.push(digit);
            }
            
            return password.join('');
        }

        // 사용자가 하는 일: 힌트 생성 함수
        function getHint(guess, password) {
            var strike = 0;
            var ball = 0;
            
            for (var i = 0; i < 4; i++) {
                if (guess[i] === password[i]) {
                    strike++;
                } else if (password.includes(guess[i])) {
                    ball++;
                }
            }
            
            return '스트라이크: ' + strike + ', 볼: ' + ball;
        }

        // 사용자가 하는 일: 남은 기회 감소 함수
        function decreaseChances() {
            remainingChances--;
            document.getElementById('chances').textContent = remainingChances;
        }

        // 사용자가 하는 일: 게임 종료 조건 체크 함수
        function checkGameOver() {
            if (remainingChances === 0) {
                document.getElementById('hint').innerHTML += '게임 오버! 정답은 ' + secretPassword + '입니다.';
                document.getElementById('restartButton').style.display = 'block';
                document.querySelector('form input[type="submit"]').disabled = true;
            } else if (document.getElementById('hint').innerHTML.includes('스트라이크: 4, 볼: 0')) {
                document.getElementById('hint').innerHTML += '축하합니다! 정답을 맞추셨습니다.';
                document.getElementById('restartButton').style.display = 'block';
                document.querySelector('form input[type="submit"]').disabled = true;
            }
        }
    </script>
</body>
</html>